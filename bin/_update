#!/usr/bin/env zsh
set -e

# Update EVERYTHING

echo "Updating dotfiles"
cd ~/.dotfiles && git pull
cd ~/.zprezto && git pull && git submodule update --init --recursive
echo "Dot Done."

if (($ISOSX)); then
  echo "Updating OSX"
  brew update
  brew upgrade --all
  brew cleanup
elif (( $+commands[apt-get] )); then
  echo "Updating Ubuntu"
  sudo apt-get update
  sudo apt-get upgrade -y
elif (( $+commands[dnf] )); then
  echo "Updating Fedora"
  sudo dnf upgrade -y
  sudo dnf autoremove -y
elif (( $+commands[yum] )); then
  echo "Updating CentOS"
  sudo yum upgrade -y
  sudo yum autoremove -y
fi

# Update other stuff
if (( $+commands[pyenv] )); then
  cd "$HOME/.pyenv" && git pull
fi

echo "All done."
